# BÃO CÃO Äá»€ ÃN

## Há»† THá»NG THÆ¯Æ NG Máº I ÄIá»†N Tá»¬ BÃN SÃCH TRá»°C TUYáº¾N - BOOKZTRON

---

## THÃ”NG TIN Äá»€ ÃN

**TÃªn Ä‘á» Ã¡n:** Há»‡ thá»‘ng ThÆ°Æ¡ng máº¡i Äiá»‡n tá»­ BÃ¡n sÃ¡ch Trá»±c tuyáº¿n - Bookztron

**CÃ´ng nghá»‡ sá»­ dá»¥ng:**

- **Frontend:** React.js, React Router, Context API, Axios
- **Backend:** Node.js, Express.js
- **Database:** MySQL + Sequelize ORM
- **AI Chatbot:** Google Gemini API
- **Payment:** VNPay Gateway
- **Authentication:** JWT (JSON Web Token)

**Thá»i gian thá»±c hiá»‡n:** LÃª Äá»©c ANh

**NgÆ°á»i thá»±c hiá»‡n:**

---

## 1. GIá»šI THIá»†U

### 1.1. Má»¥c tiÃªu Ä‘á» Ã¡n

XÃ¢y dá»±ng má»™t há»‡ thá»‘ng thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ hoÃ n chá»‰nh cho viá»‡c mua bÃ¡n sÃ¡ch trá»±c tuyáº¿n vá»›i cÃ¡c tÃ­nh nÄƒng:

âœ… **Quáº£n lÃ½ sáº£n pháº©m:** CRUD sÃ¡ch, phÃ¢n loáº¡i theo thá»ƒ loáº¡i, tÃ¬m kiáº¿m, lá»c
âœ… **Quáº£n lÃ½ ngÆ°á»i dÃ¹ng:** ÄÄƒng kÃ½, Ä‘Äƒng nháº­p, phÃ¢n quyá»n (Admin/User)
âœ… **Giá» hÃ ng & Wishlist:** ThÃªm/xÃ³a sáº£n pháº©m, quáº£n lÃ½ danh sÃ¡ch yÃªu thÃ­ch
âœ… **Äáº·t hÃ ng & Thanh toÃ¡n:** COD, VNPay, theo dÃµi tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng
âœ… **Lá»‹ch sá»­ giao hÃ ng:** Xem cÃ¡c Ä‘Æ¡n hÃ ng Ä‘Ã£ giao thÃ nh cÃ´ng
âœ… **Há»‡ thá»‘ng thÃ´ng bÃ¡o:** Real-time notifications cho khÃ¡ch hÃ ng
âœ… **AI Chatbot:** TÆ° váº¥n sÃ¡ch, giáº£i Ä‘Ã¡p tháº¯c máº¯c 24/7
âœ… **Quáº£n trá»‹ Admin:** Dashboard, quáº£n lÃ½ Ä‘Æ¡n hÃ ng, sáº£n pháº©m, ngÆ°á»i dÃ¹ng
âœ… **Äa ngÃ´n ngá»¯:** Há»— trá»£ Tiáº¿ng Viá»‡t vÃ  Tiáº¿ng Anh
âœ… **Session per-tab:** Cho phÃ©p demo Admin vÃ  User Ä‘á»“ng thá»i

### 1.2. Pháº¡m vi Ä‘á» Ã¡n

- PhÃ¡t triá»ƒn Full-stack web application
- TÃ­ch há»£p thanh toÃ¡n Ä‘iá»‡n tá»­ VNPay
- TÃ­ch há»£p AI Chatbot (Google Gemini)
- Responsive design cho mobile vÃ  desktop
- RESTful API architecture
- Database design & optimization

---

## 2. PHÃ‚N TÃCH Há»† THá»NG

### 2.1. Chá»©c nÄƒng chÃ­nh

#### **A. PhÃ­a KhÃ¡ch hÃ ng (Customer)**

1. **XÃ¡c thá»±c & PhÃ¢n quyá»n**

   - ÄÄƒng kÃ½ tÃ i khoáº£n (username, email, password)
   - ÄÄƒng nháº­p vá»›i JWT authentication
   - Remember me (lÆ°u session localStorage)
   - Session per-tab (má»—i tab Ä‘á»™c láº­p)
   - ÄÄƒng xuáº¥t

2. **Quáº£n lÃ½ Sáº£n pháº©m**

   - Xem danh sÃ¡ch sÃ¡ch (Shop page)
   - TÃ¬m kiáº¿m sÃ¡ch theo tÃªn, tÃ¡c giáº£
   - Lá»c theo thá»ƒ loáº¡i (Genre filter)
   - PhÃ¢n trang (Pagination)
   - Xem chi tiáº¿t sÃ¡ch (Product detail page)
   - Hiá»ƒn thá»‹ giÃ¡ gá»‘c, giÃ¡ khuyáº¿n mÃ£i, % giáº£m giÃ¡

3. **Giá» hÃ ng (Cart)**

   - ThÃªm sÃ¡ch vÃ o giá» hÃ ng
   - Cáº­p nháº­t sá»‘ lÆ°á»£ng
   - XÃ³a sáº£n pháº©m khá»i giá»
   - TÃ­nh tá»•ng tiá»n tá»± Ä‘á»™ng
   - Persistent cart (lÆ°u trÃªn server)

4. **Danh sÃ¡ch YÃªu thÃ­ch (Wishlist)**

   - ThÃªm/xÃ³a sÃ¡ch yÃªu thÃ­ch
   - Xem danh sÃ¡ch wishlist
   - ThÃªm tá»« wishlist vÃ o giá» hÃ ng

5. **Äáº·t hÃ ng & Thanh toÃ¡n**

   - Nháº­p thÃ´ng tin giao hÃ ng (tÃªn, SÄT, Ä‘á»‹a chá»‰)
   - Chá»n phÆ°Æ¡ng thá»©c thanh toÃ¡n:
     - **COD:** Thanh toÃ¡n khi nháº­n hÃ ng
     - **VNPay:** Thanh toÃ¡n qua QR/tháº»
   - XÃ¡c nháº­n Ä‘áº·t hÃ ng
   - TÃ­ch há»£p VNPay Gateway
   - Xá»­ lÃ½ callback tá»« VNPay

6. **Quáº£n lÃ½ ÄÆ¡n hÃ ng**

   - Xem danh sÃ¡ch Ä‘Æ¡n hÃ ng Ä‘ang xá»­ lÃ½
   - Theo dÃµi tráº¡ng thÃ¡i:
     - Pending (Chá» xÃ¡c nháº­n)
     - Confirmed (ÄÃ£ xÃ¡c nháº­n)
     - Shipped (Äang giao)
     - Delivered (ÄÃ£ giao)
     - Cancelled (ÄÃ£ há»§y)
   - Há»§y Ä‘Æ¡n hÃ ng (vá»›i lÃ½ do)
   - Auto-refresh tráº¡ng thÃ¡i (polling 10s)

7. **Lá»‹ch sá»­ Giao hÃ ng**

   - Xem cÃ¡c Ä‘Æ¡n hÃ ng Ä‘Ã£ giao thÃ nh cÃ´ng
   - Chi tiáº¿t tá»«ng Ä‘Æ¡n
   - Thá»‘ng kÃª tá»•ng chi tiÃªu

8. **ThÃ´ng bÃ¡o (Notifications)**

   - Nháº­n thÃ´ng bÃ¡o khi:
     - ÄÆ¡n hÃ ng Ä‘Æ°á»£c xÃ¡c nháº­n
     - ÄÆ¡n hÃ ng Ä‘ang giao
     - ÄÆ¡n hÃ ng Ä‘Ã£ giao
     - ÄÆ¡n hÃ ng bá»‹ há»§y
   - Äáº¿m sá»‘ thÃ´ng bÃ¡o chÆ°a Ä‘á»c
   - Dropdown hiá»ƒn thá»‹ 5 thÃ´ng bÃ¡o gáº§n nháº¥t

9. **AI Chatbot**

   - Chat vá»›i AI (Google Gemini)
   - TÆ° váº¥n sÃ¡ch phÃ¹ há»£p
   - Giáº£i Ä‘Ã¡p vá» chÃ­nh sÃ¡ch (giao hÃ ng, thanh toÃ¡n, Ä‘á»•i tráº£)
   - Quick reply buttons (6 options)
   - LÆ°u lá»‹ch sá»­ chat
   - Typing indicator
   - Responsive chat widget

10. **Äa ngÃ´n ngá»¯**
    - Chuyá»ƒn Ä‘á»•i Tiáº¿ng Viá»‡t / English
    - i18n integration

#### **B. PhÃ­a Quáº£n trá»‹ (Admin)**

1. **Dashboard**

   - Thá»‘ng kÃª tá»•ng quan:
     - Tá»•ng ngÆ°á»i dÃ¹ng
     - Tá»•ng sáº£n pháº©m
     - Tá»•ng Ä‘Æ¡n hÃ ng
     - Tá»•ng doanh thu (delivered orders)
   - ÄÆ¡n hÃ ng gáº§n Ä‘Ã¢y
   - Quick actions

2. **Quáº£n lÃ½ Sáº£n pháº©m**

   - Xem danh sÃ¡ch sáº£n pháº©m (Table view)
   - TÃ¬m kiáº¿m, lá»c, phÃ¢n trang
   - ThÃªm sáº£n pháº©m má»›i
   - Sá»­a thÃ´ng tin sáº£n pháº©m
   - XÃ³a sáº£n pháº©m
   - Upload áº£nh sáº£n pháº©m

3. **Quáº£n lÃ½ ÄÆ¡n hÃ ng**

   - Xem táº¥t cáº£ Ä‘Æ¡n hÃ ng
   - Lá»c theo tráº¡ng thÃ¡i
   - Xem chi tiáº¿t Ä‘Æ¡n hÃ ng
   - Cáº­p nháº­t tráº¡ng thÃ¡i:
     - XÃ¡c nháº­n Ä‘Æ¡n â†’ Táº¡o notification
     - ÄÃ¡nh dáº¥u Ä‘ang giao â†’ Táº¡o notification
     - ÄÃ¡nh dáº¥u Ä‘Ã£ giao â†’ Táº¡o notification
     - Há»§y Ä‘Æ¡n â†’ Táº¡o notification

4. **Quáº£n lÃ½ NgÆ°á»i dÃ¹ng**

   - Xem danh sÃ¡ch user
   - TÃ¬m kiáº¿m user
   - Xem chi tiáº¿t user
   - Ban/Unban user
   - XÃ³a user
   - Thá»‘ng kÃª user

5. **PhÃ¢n tÃ­ch (Analytics)**

   - Biá»ƒu Ä‘á»“ doanh thu theo thá»i gian
   - Top sáº£n pháº©m bÃ¡n cháº¡y
   - PhÃ¢n tÃ­ch Ä‘Æ¡n hÃ ng theo tráº¡ng thÃ¡i
   - (Frontend UI Ä‘Ã£ cÃ³, backend endpoint cáº§n hoÃ n thiá»‡n)

6. **Role Switcher**
   - Chuyá»ƒn Ä‘á»•i giá»¯a Admin mode vÃ  Customer mode
   - Dropdown chá»n role
   - Dá»… dÃ ng test UX cá»§a cáº£ 2 phÃ­a

---

## 3. KIáº¾N TRÃšC Há»† THá»NG

### 3.1. Kiáº¿n trÃºc tá»•ng quan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CLIENT (Browser)                      â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              React.js Frontend (Port 3000)              â”‚ â”‚
â”‚  â”‚  - Components (Card, Navbar, Toast, Chatbot...)        â”‚ â”‚
â”‚  â”‚  - Context API (Cart, Wishlist, Orders, User...)       â”‚ â”‚
â”‚  â”‚  - Pages (Home, Shop, Cart, Orders, Admin...)          â”‚ â”‚
â”‚  â”‚  - React Router (Client-side routing)                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                  â”‚
â”‚                            â”‚ HTTP/HTTPS (Axios)               â”‚
â”‚                            â–¼                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND SERVER (Node.js)                  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           Express.js REST API (Port 5000)               â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   Routes     â”‚  â”‚ Controllers  â”‚  â”‚  Middleware  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - auth       â”‚  â”‚ - auth       â”‚  â”‚ - auth       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - product    â”‚  â”‚ - product    â”‚  â”‚ - admin      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - cart       â”‚  â”‚ - cart       â”‚  â”‚ - CORS       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ - order      â”‚  â”‚ - order      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â”‚ - payment    â”‚  â”‚ - payment    â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ - chatbot    â”‚  â”‚ - chatbot    â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ - admin/*    â”‚  â”‚ - admin/*    â”‚                    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                  â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                   â”‚                 â”‚                         â”‚
â”‚                   â–¼                 â–¼                         â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       â”‚  Sequelize ORM    â”‚  â”‚  Google Gemini â”‚             â”‚
â”‚       â”‚                   â”‚  â”‚   API (AI)     â”‚             â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                 â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MySQL Database                          â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Users   â”‚  â”‚ Products â”‚  â”‚  Orders  â”‚  â”‚Notificationsâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   Cart   â”‚  â”‚ Wishlist â”‚  â”‚OrderItemsâ”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    External Services                         â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   VNPay Gateway      â”‚        â”‚  Google Gemini API   â”‚  â”‚
â”‚  â”‚   (Payment)          â”‚        â”‚  (AI Chatbot)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2. Luá»“ng dá»¯ liá»‡u (Data Flow)

#### **Luá»“ng Ä‘áº·t hÃ ng vá»›i VNPay:**

```
User â†’ Chá»n sáº£n pháº©m â†’ ThÃªm vÃ o Cart â†’ Checkout
  â†’ Nháº­p Ä‘á»‹a chá»‰ â†’ Chá»n VNPay
  â†’ Frontend POST /api/payment/create-order
  â†’ Backend táº¡o Order (status: pending)
  â†’ Backend táº¡o VNPay payment URL (vá»›i secure hash)
  â†’ Frontend redirect user Ä‘áº¿n VNPay
  â†’ User thanh toÃ¡n trÃªn VNPay
  â†’ VNPay redirect vá» /orders/vnpay_return?vnp_ResponseCode=00...
  â†’ Frontend gá»i backend verify payment
  â†’ Backend verify secure hash
  â†’ Backend cáº­p nháº­t Order status = confirmed
  â†’ Táº¡o Notification cho user
  â†’ Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng
```

#### **Luá»“ng chatbot:**

```
User â†’ Click widget chat â†’ Nháº­p tin nháº¯n
  â†’ Frontend POST /api/chatbot/message { message, conversationHistory }
  â†’ Backend gá»i Google Gemini API vá»›i system prompt
  â†’ Gemini tráº£ vá» response (AI-generated)
  â†’ Backend tráº£ response vá» frontend
  â†’ Frontend hiá»ƒn thá»‹ trong chat bubble
  â†’ LÆ°u lá»‹ch sá»­ vÃ o localStorage
```

#### **Luá»“ng thÃ´ng bÃ¡o:**

```
Admin â†’ Cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng (vÃ­ dá»¥: Shipped)
  â†’ Frontend POST /api/admin/orders/:id/shipping
  â†’ Backend cáº­p nháº­t Order.status = 'shipped'
  â†’ Backend táº¡o Notification má»›i cho userId
  â†’ Notification lÆ°u vÃ o DB (isRead: false)
  â†’ (Customer side) Navbar polling GET /api/notifications (má»—i 30s)
  â†’ Backend tráº£ notifications + unreadCount
  â†’ Frontend hiá»ƒn thá»‹ badge Ä‘á» trÃªn icon chuÃ´ng
  â†’ User click chuÃ´ng â†’ Dropdown hiá»‡n thÃ´ng bÃ¡o
```

---

## 4. THIáº¾T Káº¾ CÆ  Sá» Dá»® LIá»†U

### 4.1. SÆ¡ Ä‘á»“ ERD (Entity Relationship Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Users         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ username            â”‚
â”‚ email (UNIQUE)      â”‚
â”‚ password (hashed)   â”‚
â”‚ role (admin/user)   â”‚
â”‚ isBanned            â”‚
â”‚ createdAt           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 1
           â”‚
           â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Orders         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ userId (FK)         â”‚
â”‚ status              â”‚
â”‚ totalAmount         â”‚
â”‚ paymentMethod       â”‚
â”‚ shippingAddress     â”‚
â”‚ shippingPhone       â”‚
â”‚ gatewayOrderId      â”‚
â”‚ cancelReason        â”‚
â”‚ createdAt           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 1
           â”‚
           â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    OrderItems       â”‚   N   â”‚    Products      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚   1   â”‚ id (PK)          â”‚
â”‚ orderId (FK)        â”‚       â”‚ title            â”‚
â”‚ productId (FK)      â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ author           â”‚
â”‚ quantity            â”‚       â”‚ originalPrice    â”‚
â”‚ price               â”‚       â”‚ discountedPrice  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ discountPercent  â”‚
                              â”‚ genre            â”‚
                              â”‚ imageUrl         â”‚
                              â”‚ description      â”‚
                              â”‚ inStock          â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚ 1
                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚                     â”‚
                          N  â”‚                  N  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚     Cart      â”‚    â”‚   Wishlist    â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ id (PK)       â”‚    â”‚ id (PK)       â”‚
                    â”‚ userId (FK)   â”‚    â”‚ userId (FK)   â”‚
                    â”‚ productId(FK) â”‚    â”‚ productId(FK) â”‚
                    â”‚ quantity      â”‚    â”‚ addedAt       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Notifications       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                â”‚
â”‚ userId (FK)            â”‚
â”‚ orderId (FK)           â”‚
â”‚ type                   â”‚
â”‚ title                  â”‚
â”‚ message                â”‚
â”‚ isRead                 â”‚
â”‚ createdAt              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2. Báº£ng chi tiáº¿t

#### **Table: Users**

| Column    | Type         | Constraints           | Description              |
| --------- | ------------ | --------------------- | ------------------------ |
| id        | INT          | PRIMARY KEY, AUTO_INC | User ID                  |
| username  | VARCHAR(50)  | NOT NULL, UNIQUE      | TÃªn Ä‘Äƒng nháº­p            |
| email     | VARCHAR(100) | NOT NULL, UNIQUE      | Email                    |
| password  | VARCHAR(255) | NOT NULL              | Password (bcrypt hashed) |
| role      | ENUM         | DEFAULT 'user'        | 'admin' or 'user'        |
| isBanned  | BOOLEAN      | DEFAULT FALSE         | Tráº¡ng thÃ¡i ban           |
| createdAt | DATETIME     | DEFAULT NOW()         | NgÃ y táº¡o                 |

#### **Table: Products**

| Column          | Type          | Constraints           | Description  |
| --------------- | ------------- | --------------------- | ------------ |
| id              | INT           | PRIMARY KEY, AUTO_INC | Product ID   |
| title           | VARCHAR(255)  | NOT NULL              | TÃªn sÃ¡ch     |
| author          | VARCHAR(100)  |                       | TÃ¡c giáº£      |
| originalPrice   | DECIMAL(10,2) | NOT NULL              | GiÃ¡ gá»‘c      |
| discountedPrice | DECIMAL(10,2) | NOT NULL              | GiÃ¡ sau giáº£m |
| discountPercent | INT           |                       | % giáº£m giÃ¡   |
| genre           | VARCHAR(50)   |                       | Thá»ƒ loáº¡i     |
| imageUrl        | VARCHAR(500)  |                       | URL áº£nh      |
| description     | TEXT          |                       | MÃ´ táº£ sÃ¡ch   |
| inStock         | BOOLEAN       | DEFAULT TRUE          | CÃ²n hÃ ng?    |
| createdAt       | DATETIME      | DEFAULT NOW()         | NgÃ y thÃªm    |

#### **Table: Orders**

| Column          | Type          | Constraints           | Description                                   |
| --------------- | ------------- | --------------------- | --------------------------------------------- |
| id              | INT           | PRIMARY KEY, AUTO_INC | Order ID                                      |
| userId          | INT           | FOREIGN KEY â†’ Users   | KhÃ¡ch hÃ ng                                    |
| status          | ENUM          | DEFAULT 'pending'     | pending/confirmed/shipped/delivered/cancelled |
| totalAmount     | DECIMAL(10,2) | NOT NULL              | Tá»•ng tiá»n                                     |
| paymentMethod   | VARCHAR(20)   |                       | COD/VNPAY                                     |
| shippingAddress | TEXT          |                       | Äá»‹a chá»‰ giao                                  |
| shippingPhone   | VARCHAR(20)   |                       | SÄT nháº­n hÃ ng                                 |
| gatewayOrderId  | VARCHAR(50)   |                       | MÃ£ giao dá»‹ch VNPay                            |
| cancelReason    | TEXT          |                       | LÃ½ do há»§y (náº¿u cÃ³)                            |
| createdAt       | DATETIME      | DEFAULT NOW()         | NgÃ y Ä‘áº·t                                      |

#### **Table: OrderItems**

| Column    | Type          | Constraints            | Description           |
| --------- | ------------- | ---------------------- | --------------------- |
| id        | INT           | PRIMARY KEY, AUTO_INC  | OrderItem ID          |
| orderId   | INT           | FOREIGN KEY â†’ Orders   | ÄÆ¡n hÃ ng              |
| productId | INT           | FOREIGN KEY â†’ Products | Sáº£n pháº©m              |
| quantity  | INT           | NOT NULL               | Sá»‘ lÆ°á»£ng              |
| price     | DECIMAL(10,2) | NOT NULL               | GiÃ¡ táº¡i thá»i Ä‘iá»ƒm mua |

#### **Table: Cart**

| Column    | Type | Constraints            | Description |
| --------- | ---- | ---------------------- | ----------- |
| id        | INT  | PRIMARY KEY, AUTO_INC  | Cart ID     |
| userId    | INT  | FOREIGN KEY â†’ Users    | User        |
| productId | INT  | FOREIGN KEY â†’ Products | Sáº£n pháº©m    |
| quantity  | INT  | NOT NULL               | Sá»‘ lÆ°á»£ng    |

#### **Table: Wishlist**

| Column    | Type     | Constraints            | Description        |
| --------- | -------- | ---------------------- | ------------------ |
| id        | INT      | PRIMARY KEY, AUTO_INC  | Wishlist ID        |
| userId    | INT      | FOREIGN KEY â†’ Users    | User               |
| productId | INT      | FOREIGN KEY â†’ Products | Sáº£n pháº©m yÃªu thÃ­ch |
| addedAt   | DATETIME | DEFAULT NOW()          | NgÃ y thÃªm          |

#### **Table: Notifications**

| Column    | Type         | Constraints           | Description                       |
| --------- | ------------ | --------------------- | --------------------------------- |
| id        | INT          | PRIMARY KEY, AUTO_INC | Notification ID                   |
| userId    | INT          | FOREIGN KEY â†’ Users   | User nháº­n                         |
| orderId   | INT          | FOREIGN KEY â†’ Orders  | ÄÆ¡n hÃ ng liÃªn quan                |
| type      | VARCHAR(50)  |                       | order_confirmed/order_shipped/... |
| title     | VARCHAR(255) |                       | TiÃªu Ä‘á» thÃ´ng bÃ¡o                 |
| message   | TEXT         |                       | Ná»™i dung                          |
| isRead    | BOOLEAN      | DEFAULT FALSE         | ÄÃ£ Ä‘á»c chÆ°a?                      |
| createdAt | DATETIME     | DEFAULT NOW()         | NgÃ y táº¡o                          |

---

## 5. API ENDPOINTS

### 5.1. Authentication APIs

| Method | Endpoint       | Description        | Auth Required | Role |
| ------ | -------------- | ------------------ | ------------- | ---- |
| POST   | /api/signup    | ÄÄƒng kÃ½ user má»›i   | No            | -    |
| POST   | /api/login     | ÄÄƒng nháº­p          | No            | -    |
| GET    | /api/user/info | Láº¥y thÃ´ng tin user | Yes           | User |

### 5.2. Product APIs

| Method | Endpoint                | Description         | Auth Required | Role  |
| ------ | ----------------------- | ------------------- | ------------- | ----- |
| GET    | /api/products           | Láº¥y danh sÃ¡ch sÃ¡ch  | No            | -     |
| GET    | /api/products/:id       | Láº¥y chi tiáº¿t 1 sÃ¡ch | No            | -     |
| POST   | /api/admin/products     | ThÃªm sÃ¡ch má»›i       | Yes           | Admin |
| PUT    | /api/admin/products/:id | Sá»­a thÃ´ng tin sÃ¡ch  | Yes           | Admin |
| DELETE | /api/admin/products/:id | XÃ³a sÃ¡ch            | Yes           | Admin |

### 5.3. Cart APIs

| Method | Endpoint      | Description           | Auth Required | Role |
| ------ | ------------- | --------------------- | ------------- | ---- |
| GET    | /api/cart     | Láº¥y giá» hÃ ng cá»§a user | Yes           | User |
| PATCH  | /api/cart     | ThÃªm sáº£n pháº©m vÃ o giá» | Yes           | User |
| PUT    | /api/cart/:id | Cáº­p nháº­t sá»‘ lÆ°á»£ng     | Yes           | User |
| DELETE | /api/cart/:id | XÃ³a sáº£n pháº©m khá»i giá» | Yes           | User |

### 5.4. Wishlist APIs

| Method | Endpoint          | Description             | Auth Required | Role |
| ------ | ----------------- | ----------------------- | ------------- | ---- |
| GET    | /api/wishlist     | Láº¥y danh sÃ¡ch yÃªu thÃ­ch | Yes           | User |
| PATCH  | /api/wishlist     | ThÃªm vÃ o wishlist       | Yes           | User |
| DELETE | /api/wishlist/:id | XÃ³a khá»i wishlist       | Yes           | User |

### 5.5. Order APIs (Customer)

| Method | Endpoint               | Description           | Auth Required | Role |
| ------ | ---------------------- | --------------------- | ------------- | ---- |
| GET    | /api/orders            | Láº¥y Ä‘Æ¡n hÃ ng cá»§a user | Yes           | User |
| GET    | /api/orders/:id        | Chi tiáº¿t 1 Ä‘Æ¡n hÃ ng   | Yes           | User |
| PATCH  | /api/orders/:id/cancel | Há»§y Ä‘Æ¡n hÃ ng          | Yes           | User |

### 5.6. Order APIs (Admin)

| Method | Endpoint                        | Description         | Auth Required | Role  |
| ------ | ------------------------------- | ------------------- | ------------- | ----- |
| GET    | /api/admin/orders               | Láº¥y táº¥t cáº£ Ä‘Æ¡n hÃ ng | Yes           | Admin |
| GET    | /api/admin/orders/:id           | Chi tiáº¿t 1 Ä‘Æ¡n      | Yes           | Admin |
| PUT    | /api/admin/orders/:id           | Cáº­p nháº­t tráº¡ng thÃ¡i | Yes           | Admin |
| PATCH  | /api/admin/orders/:id/confirm   | XÃ¡c nháº­n Ä‘Æ¡n        | Yes           | Admin |
| PATCH  | /api/admin/orders/:id/shipping  | ÄÃ¡nh dáº¥u Ä‘ang giao  | Yes           | Admin |
| PATCH  | /api/admin/orders/:id/delivered | ÄÃ¡nh dáº¥u Ä‘Ã£ giao    | Yes           | Admin |
| PATCH  | /api/admin/orders/:id/cancel    | Admin há»§y Ä‘Æ¡n       | Yes           | Admin |
| GET    | /api/admin/orders/stats/summary | Thá»‘ng kÃª tá»•ng quan  | Yes           | Admin |
| GET    | /api/admin/orders/recent        | ÄÆ¡n hÃ ng gáº§n Ä‘Ã¢y    | Yes           | Admin |

### 5.7. Payment APIs

| Method | Endpoint                  | Description              | Auth Required | Role |
| ------ | ------------------------- | ------------------------ | ------------- | ---- |
| POST   | /api/payment/create-order | Táº¡o Ä‘Æ¡n hÃ ng + VNPay URL | Yes           | User |
| GET    | /api/payment/vnpay-return | VNPay callback (verify)  | No            | -    |
| POST   | /api/payment/vnpay-ipn    | VNPay IPN (webhook)      | No            | -    |

### 5.8. User Management APIs (Admin)

| Method | Endpoint                   | Description        | Auth Required | Role  |
| ------ | -------------------------- | ------------------ | ------------- | ----- |
| GET    | /api/admin/users           | Láº¥y danh sÃ¡ch user | Yes           | Admin |
| GET    | /api/admin/users/:id       | Chi tiáº¿t 1 user    | Yes           | Admin |
| PATCH  | /api/admin/users/:id/ban   | Ban user           | Yes           | Admin |
| PATCH  | /api/admin/users/:id/unban | Unban user         | Yes           | Admin |
| DELETE | /api/admin/users/:id       | XÃ³a user           | Yes           | Admin |
| GET    | /api/admin/users/stats     | Thá»‘ng kÃª user      | Yes           | Admin |

### 5.9. Notification APIs

| Method | Endpoint                    | Description            | Auth Required | Role |
| ------ | --------------------------- | ---------------------- | ------------- | ---- |
| GET    | /api/notifications          | Láº¥y thÃ´ng bÃ¡o cá»§a user | Yes           | User |
| PATCH  | /api/notifications/:id/read | ÄÃ¡nh dáº¥u Ä‘Ã£ Ä‘á»c        | Yes           | User |

### 5.10. Chatbot APIs

| Method | Endpoint                 | Description               | Auth Required | Role |
| ------ | ------------------------ | ------------------------- | ------------- | ---- |
| POST   | /api/chatbot/message     | Gá»­i tin nháº¯n chat vá»›i AI  | No            | -    |
| POST   | /api/chatbot/quick-reply | Xá»­ lÃ½ quick reply buttons | No            | -    |

---

## 6. CÃ”NG NGHá»† & THÆ¯ VIá»†N Sá»¬ Dá»¤NG

### 6.1. Frontend

| Package          | Version | Má»¥c Ä‘Ã­ch                         |
| ---------------- | ------- | -------------------------------- |
| react            | 18.x    | Framework chÃ­nh                  |
| react-dom        | 18.x    | Render React                     |
| react-router-dom | 6.x     | Client-side routing              |
| axios            | 1.x     | HTTP client                      |
| react-lottie     | 1.x     | Animation (loading, empty state) |
| react-i18next    | 13.x    | Äa ngÃ´n ngá»¯ (i18n)               |
| i18next          | 23.x    | i18n core                        |
| jwt-decode       | 3.x     | Decode JWT token                 |
| react-icons      | 4.x     | Icon library                     |

### 6.2. Backend

| Package               | Version  | Má»¥c Ä‘Ã­ch                   |
| --------------------- | -------- | -------------------------- |
| express               | 4.x      | Web framework              |
| mysql2                | 3.x      | MySQL driver               |
| sequelize             | 6.x      | ORM cho MySQL              |
| bcryptjs              | 2.x      | Hash password              |
| jsonwebtoken          | 9.x      | JWT authentication         |
| dotenv                | 16.x     | Äá»c biáº¿n mÃ´i trÆ°á»ng (.env) |
| cors                  | 2.x      | Enable CORS                |
| multer                | 1.x      | Upload file (áº£nh sáº£n pháº©m) |
| crypto                | built-in | VNPay secure hash          |
| @google/generative-ai | 0.x      | Google Gemini AI SDK       |

### 6.3. Database

- **MySQL:** 8.0+
- **Sequelize ORM** Ä‘á»ƒ quáº£n lÃ½ models vÃ  migrations

---

## 7. TÃNH NÄ‚NG Ná»”I Báº¬T

### 7.1. AI Chatbot vá»›i Google Gemini

**MÃ´ táº£:**

- TÃ­ch há»£p trá»£ lÃ½ AI thÃ´ng minh sá»­ dá»¥ng Google Gemini API (miá»…n phÃ­)
- Chat widget Ä‘áº¹p máº¯t, responsive á»Ÿ gÃ³c pháº£i mÃ n hÃ¬nh
- TÆ° váº¥n sÃ¡ch, giáº£i Ä‘Ã¡p chÃ­nh sÃ¡ch 24/7

**Chá»©c nÄƒng:**

- âœ… Chat trá»±c tiáº¿p vá»›i AI
- âœ… 6 Quick reply buttons (TÆ° váº¥n sÃ¡ch, Tra Ä‘Æ¡n hÃ ng, ChÃ­nh sÃ¡ch...)
- âœ… LÆ°u lá»‹ch sá»­ chat (localStorage)
- âœ… Typing indicator
- âœ… Unread badge
- âœ… XÃ³a lá»‹ch sá»­

**Ká»¹ thuáº­t:**

- Frontend: React component (`ChatbotWidget.jsx`)
- Backend: Controller gá»i Gemini API vá»›i custom system prompt
- Gemini model: `gemini-pro`
- Context window: 6 tin nháº¯n gáº§n nháº¥t

### 7.2. Há»‡ thá»‘ng ThÃ´ng bÃ¡o Real-time

**MÃ´ táº£:**

- Admin cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng â†’ Customer nháº­n thÃ´ng bÃ¡o tá»± Ä‘á»™ng
- KhÃ´ng cáº§n WebSocket, sá»­ dá»¥ng polling (Ä‘Æ¡n giáº£n, á»•n Ä‘á»‹nh)

**Luá»“ng hoáº¡t Ä‘á»™ng:**

1. Admin cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n (Confirmed/Shipped/Delivered/Cancelled)
2. Backend táº¡o Notification trong DB
3. Navbar frontend polling `/api/notifications` má»—i 30s
4. Hiá»ƒn thá»‹ badge Ä‘á» trÃªn icon chuÃ´ng
5. Click chuÃ´ng â†’ Dropdown hiá»ƒn thá»‹ 5 thÃ´ng bÃ¡o gáº§n nháº¥t
6. Tá»± Ä‘á»™ng refresh danh sÃ¡ch Ä‘Æ¡n hÃ ng (polling 10s)

**Ká»¹ thuáº­t:**

- Backend: `notificationController.js` + `createNotification()` helper
- Frontend: `Navbar.js` vá»›i `setInterval()` polling
- Polling interval: 30s (cÃ³ thá»ƒ Ä‘iá»u chá»‰nh)

### 7.3. Session per-tab (Multi-tab demo)

**MÃ´ táº£:**

- Cho phÃ©p má»Ÿ Admin vÃ  Customer cÃ¹ng lÃºc trong 2 tab khÃ¡c nhau
- Má»—i tab cÃ³ session Ä‘á»™c láº­p

**CÃ¡ch hoáº¡t Ä‘á»™ng:**

- Storage shim trong `src/index.js`
- Auth keys (`token`, `userRole`) lÆ°u vÃ o `sessionStorage` (per-tab)
- "Remember me" checkbox â†’ lÆ°u vÃ o `localStorage` (cross-tab)
- Token transfer giá»¯a tabs khi má»Ÿ tab má»›i (postMessage)

**Use case:**

- Demo: Tab 1 (Admin) + Tab 2 (Customer)
- Test UX Ä‘á»“ng thá»i
- KhÃ´ng bá»‹ logout khi má»Ÿ tab má»›i

### 7.4. VNPay Payment Integration

**MÃ´ táº£:**

- TÃ­ch há»£p cá»•ng thanh toÃ¡n VNPay (Sandbox mode)
- Há»— trá»£ thanh toÃ¡n QR code vÃ  tháº»

**Luá»“ng thanh toÃ¡n:**

1. User chá»n VNPay táº¡i Checkout
2. Backend táº¡o secure hash theo chuáº©n VNPay
3. Redirect user Ä‘áº¿n VNPay gateway
4. User thanh toÃ¡n
5. VNPay redirect vá» `/orders/vnpay_return`
6. Backend verify secure hash
7. Cáº­p nháº­t Order status + táº¡o notification

**Báº£o máº­t:**

- HMAC SHA512 hash
- Verify signature tá»« VNPay
- IPN webhook Ä‘á»ƒ xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™

### 7.5. Responsive Design

- Mobile-first approach
- Breakpoints: 480px, 768px, 1024px
- Chatbot widget responsive
- Admin dashboard responsive
- Touch-friendly UI

---

## 8. HÆ¯á»šNG DáºªN CÃ€I Äáº¶T & TRIá»‚N KHAI

### 8.1. YÃªu cáº§u há»‡ thá»‘ng

- **Node.js:** v16+ (khuyáº¿n nghá»‹ v18)
- **MySQL:** 8.0+
- **npm:** 8+
- **Browser:** Chrome, Firefox, Edge (latest)

### 8.2. CÃ i Ä‘áº·t

#### **BÆ°á»›c 1: Clone repository**

```bash
git clone [repository_url]
cd Bookztron-E-Commerce_Book_Store-development
```

#### **BÆ°á»›c 2: Setup Database**

```sql
CREATE DATABASE database_book;
```

Hoáº·c import file SQL (náº¿u cÃ³):

```bash
mysql -u root -p database_book < database_backup.sql
```

#### **BÆ°á»›c 3: Cáº¥u hÃ¬nh Backend**

```bash
cd backend
npm install
```

Táº¡o file `.env`:

```env
# Database
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=database_book

# JWT
JWT_SECRET=your_long_random_secret_key_here

# VNPay (Sandbox)
VNP_TMNCODE=your_vnpay_tmncode
VNP_HASHSECRET=your_vnpay_hashsecret
VNP_URL=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
VNP_RETURN_URL=http://localhost:3000/orders/vnpay_return
VNP_IPN_URL=http://localhost:5000/api/payment/vnpay-ipn

# Gemini AI
GEMINI_API_KEY=your_gemini_api_key_here

# Server
PORT=5000
```

Láº¥y Gemini API key (miá»…n phÃ­):

- VÃ o: https://makersuite.google.com/app/apikey
- ÄÄƒng nháº­p Gmail â†’ Create API Key

#### **BÆ°á»›c 4: Cáº¥u hÃ¬nh Frontend**

```bash
cd ..  # vá» thÆ° má»¥c gá»‘c
npm install
```

#### **BÆ°á»›c 5: Cháº¡y á»©ng dá»¥ng**

**Terminal 1 (Backend):**

```bash
cd backend
npm start
```

Truy cáº­p: http://localhost:5000

**Terminal 2 (Frontend):**

```bash
npm start
```

Truy cáº­p: http://localhost:3000

### 8.3. TÃ i khoáº£n máº·c Ä‘á»‹nh

**Admin:**

- Email: `admin@bookztron.com`
- Password: `admin123`

**User:**

- ÄÄƒng kÃ½ tÃ i khoáº£n má»›i táº¡i `/signup`

---

## 9. TESTING & QA

### 9.1. Test Cases

#### **Test Authentication:**

âœ… ÄÄƒng kÃ½ user má»›i  
âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng  
âœ… ÄÄƒng nháº­p sai máº­t kháº©u  
âœ… ÄÄƒng xuáº¥t  
âœ… Remember me (persist session)

#### **Test Shopping Flow:**

âœ… Xem danh sÃ¡ch sÃ¡ch  
âœ… TÃ¬m kiáº¿m sÃ¡ch  
âœ… Lá»c theo thá»ƒ loáº¡i  
âœ… ThÃªm vÃ o giá» hÃ ng  
âœ… Cáº­p nháº­t sá»‘ lÆ°á»£ng giá» hÃ ng  
âœ… XÃ³a sáº£n pháº©m khá»i giá»  
âœ… ThÃªm vÃ o wishlist  
âœ… XÃ³a khá»i wishlist  
âœ… Checkout vá»›i COD  
âœ… Checkout vá»›i VNPay  
âœ… Xem Ä‘Æ¡n hÃ ng  
âœ… Há»§y Ä‘Æ¡n hÃ ng

#### **Test Admin Functions:**

âœ… Xem dashboard  
âœ… ThÃªm sáº£n pháº©m má»›i  
âœ… Sá»­a sáº£n pháº©m  
âœ… XÃ³a sáº£n pháº©m  
âœ… Upload áº£nh sáº£n pháº©m  
âœ… Xem danh sÃ¡ch Ä‘Æ¡n hÃ ng  
âœ… Cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n (Confirmed/Shipped/Delivered)  
âœ… Há»§y Ä‘Æ¡n hÃ ng  
âœ… Xem danh sÃ¡ch user  
âœ… Ban/Unban user

#### **Test Notifications:**

âœ… Nháº­n thÃ´ng bÃ¡o khi Ä‘Æ¡n Ä‘Æ°á»£c xÃ¡c nháº­n  
âœ… Nháº­n thÃ´ng bÃ¡o khi Ä‘Æ¡n Ä‘ang giao  
âœ… Nháº­n thÃ´ng bÃ¡o khi Ä‘Æ¡n Ä‘Ã£ giao  
âœ… Nháº­n thÃ´ng bÃ¡o khi Ä‘Æ¡n bá»‹ há»§y  
âœ… Badge Ä‘áº¿m sá»‘ thÃ´ng bÃ¡o chÆ°a Ä‘á»c

#### **Test Chatbot:**

âœ… Má»Ÿ/Ä‘Ã³ng chat widget  
âœ… Gá»­i tin nháº¯n â†’ nháº­n response tá»« AI  
âœ… Click quick reply buttons  
âœ… LÆ°u lá»‹ch sá»­ chat  
âœ… XÃ³a lá»‹ch sá»­ chat  
âœ… Typing indicator hiá»ƒn thá»‹

#### **Test Responsive:**

âœ… Desktop (1920x1080)  
âœ… Tablet (768x1024)  
âœ… Mobile (375x667)  
âœ… Chat widget responsive

### 9.2. Browser Compatibility

| Browser        | Version | Status |
| -------------- | ------- | ------ |
| Google Chrome  | 120+    | âœ… OK  |
| Firefox        | 120+    | âœ… OK  |
| Microsoft Edge | 120+    | âœ… OK  |
| Safari (macOS) | 16+     | âœ… OK  |
| Safari (iOS)   | 15+     | âœ… OK  |

---

## 10. Káº¾T QUáº¢ Äáº T ÄÆ¯á»¢C

### 10.1. Chá»©c nÄƒng hoÃ n thÃ nh

âœ… **100% tÃ­nh nÄƒng cÆ¡ báº£n:**

- Authentication & Authorization (JWT)
- Product CRUD (Admin)
- Shopping Cart & Wishlist
- Order Management (Customer + Admin)
- Payment Integration (VNPay)
- Delivery History
- Notifications System
- Multi-language (i18n)

âœ… **TÃ­nh nÄƒng nÃ¢ng cao:**

- AI Chatbot (Google Gemini)
- Real-time Notifications (Polling)
- Session per-tab (Multi-tab demo)
- Role Switcher
- Responsive Design
- Cancel Order with Reason

âœ… **Admin Dashboard:**

- Statistics Overview
- Product Management
- Order Management
- User Management
- Analytics UI (frontend ready)

### 10.2. Performance

- **Page Load Time:** < 2s (localhost)
- **API Response Time:** < 200ms average
- **Database Queries:** Optimized with indexes
- **Image Loading:** Lazy load (náº¿u cÃ³)
- **Chatbot Response:** < 3s (depends on Gemini API)

### 10.3. Code Quality

- **Frontend:** Component-based architecture (React)
- **Backend:** MVC pattern (Model-View-Controller)
- **Database:** Normalized schema (3NF)
- **Security:** Password hashing (bcrypt), JWT, SQL injection prevention (Sequelize ORM)
- **Error Handling:** Try-catch blocks, user-friendly error messages
- **Code Documentation:** Comments trong code

---

## 11. HÆ¯á»šNG PHÃT TRIá»‚N

### 11.1. TÃ­nh nÄƒng cÃ³ thá»ƒ má»Ÿ rá»™ng

ğŸ”® **Ngáº¯n háº¡n (1-2 tuáº§n):**

- âœ¨ HoÃ n thiá»‡n Analytics Dashboard (biá»ƒu Ä‘á»“ doanh thu, top sáº£n pháº©m)
- âœ¨ Rating & Review system (Ä‘Ã¡nh giÃ¡ sÃ¡ch)
- âœ¨ Product recommendations (AI-based hoáº·c collaborative filtering)
- âœ¨ Email notifications (Nodemailer + SMTP)
- âœ¨ Export orders to Excel/PDF
- âœ¨ Coupon/Discount codes

ğŸš€ **Trung háº¡n (1-2 thÃ¡ng):**

- ğŸ¤– Chatbot RAG (Retrieval-Augmented Generation) - Search sÃ¡ch thÃ´ng minh tá»« DB
- ğŸ“Š Advanced analytics (funnel analysis, user behavior)
- ğŸ’³ ThÃªm phÆ°Æ¡ng thá»©c thanh toÃ¡n (Momo, ZaloPay, Stripe)
- ğŸ“± Mobile app (React Native)
- ğŸ”” WebSocket for real-time notifications
- ğŸŒ SEO optimization (Server-side rendering vá»›i Next.js)

ğŸŒŸ **DÃ i háº¡n (3-6 thÃ¡ng):**

- ğŸª Multi-vendor marketplace (nhiá»u nhÃ  bÃ¡n)
- ğŸ“¦ Inventory management system
- ğŸšš Shipping partner integration (GHN, GHTK, Viettel Post)
- ğŸ‘¥ Social login (Google, Facebook OAuth)
- ğŸ Loyalty program (Ä‘iá»ƒm thÆ°á»Ÿng)
- ğŸ“ˆ A/B testing framework
- â˜ï¸ Cloud deployment (AWS, Google Cloud, Azure)
- ğŸ”’ PCI DSS compliance (náº¿u xá»­ lÃ½ tháº»)

### 11.2. Technical Debt

âš ï¸ **Cáº§n cáº£i thiá»‡n:**

- Add unit tests (Jest, React Testing Library)
- Add E2E tests (Cypress, Playwright)
- Implement rate limiting (API throttling)
- Add request logging (Morgan, Winston)
- Database backup strategy
- CI/CD pipeline (GitHub Actions, Jenkins)
- Docker containerization
- Load balancing (Nginx)

---

## 12. KHUYáº¾N NGHá»Š Báº¢O Máº¬T

### 12.1. ÄÃ£ Ã¡p dá»¥ng

âœ… Password hashing (bcrypt)  
âœ… JWT authentication  
âœ… SQL injection prevention (Sequelize ORM)  
âœ… CORS configuration  
âœ… Environment variables (.env)  
âœ… VNPay secure hash (HMAC SHA512)  
âœ… Input validation (backend)

### 12.2. Cáº§n bá»• sung (Production)

ğŸ”’ **Báº¯t buá»™c khi deploy:**

- HTTPS/SSL certificate (Let's Encrypt)
- Helmet.js (secure HTTP headers)
- Rate limiting (express-rate-limit)
- XSS protection (sanitize user input)
- CSRF tokens
- HttpOnly cookies cho JWT (thay vÃ¬ localStorage)
- API key rotation
- Backup database Ä‘á»‹nh ká»³
- WAF (Web Application Firewall)
- Monitoring & Alerting (Sentry, New Relic)

---

## 13. Káº¾T LUáº¬N

### 13.1. TÃ³m táº¯t

Äá» Ã¡n **Bookztron E-Commerce** Ä‘Ã£ xÃ¢y dá»±ng thÃ nh cÃ´ng má»™t há»‡ thá»‘ng thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ bÃ¡n sÃ¡ch trá»±c tuyáº¿n hoÃ n chá»‰nh vá»›i Ä‘áº§y Ä‘á»§ cÃ¡c tÃ­nh nÄƒng:

âœ… Quáº£n lÃ½ sáº£n pháº©m, giá» hÃ ng, wishlist  
âœ… Äáº·t hÃ ng & thanh toÃ¡n trá»±c tuyáº¿n (VNPay)  
âœ… Quáº£n trá»‹ Admin (Dashboard, CRUD operations)  
âœ… Há»‡ thá»‘ng thÃ´ng bÃ¡o real-time  
âœ… AI Chatbot thÃ´ng minh (Google Gemini)  
âœ… Responsive design, Ä‘a ngÃ´n ngá»¯

Há»‡ thá»‘ng Ä‘Æ°á»£c xÃ¢y dá»±ng trÃªn kiáº¿n trÃºc **Full-stack JavaScript** (React + Node.js + MySQL), tuÃ¢n thá»§ cÃ¡c best practices vá» security, performance vÃ  UX.

### 13.2. BÃ i há»c kinh nghiá»‡m

**Ká»¹ thuáº­t:**

- Hiá»ƒu sÃ¢u vá» RESTful API design
- Sequelize ORM cho database operations
- JWT authentication flow
- Payment gateway integration
- AI API integration (Gemini)
- State management vá»›i Context API
- Responsive design techniques

**Soft skills:**

- Quáº£n lÃ½ thá»i gian vÃ  deadline
- Debugging & troubleshooting
- Äá»c documentation (VNPay, Gemini, Sequelize...)
- Problem-solving

### 13.3. Lá»i cáº£m Æ¡n

[ThÃªm lá»i cáº£m Æ¡n tháº§y cÃ´ hÆ°á»›ng dáº«n, báº¡n bÃ¨ há»— trá»£...]

---

## PHá»¤ Lá»¤C

### A. TÃ i liá»‡u tham kháº£o

- React Documentation: https://react.dev/
- Express.js Guide: https://expressjs.com/
- Sequelize Docs: https://sequelize.org/
- VNPay Integration Guide: [Link ná»™i bá»™]
- Google Gemini API: https://ai.google.dev/docs
- JWT Best Practices: https://jwt.io/introduction

### B. Repository Structure

```
Bookztron/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ controllers/      # Business logic
â”‚   â”œâ”€â”€ routes/           # API routes
â”‚   â”œâ”€â”€ models/           # Sequelize models
â”‚   â”œâ”€â”€ middleware/       # Auth, admin middleware
â”‚   â”œâ”€â”€ config/           # DB config
â”‚   â”œâ”€â”€ public/images/    # Uploaded images
â”‚   â”œâ”€â”€ .env              # Environment variables
â”‚   â”œâ”€â”€ server.js         # Entry point
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Components/       # React components
â”‚   â”œâ”€â”€ Pages/            # Page components
â”‚   â”œâ”€â”€ Context/          # Context providers
â”‚   â”œâ”€â”€ Assets/           # Images, icons
â”‚   â”œâ”€â”€ locales/          # i18n translations
â”‚   â”œâ”€â”€ App.js
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ i18n.js
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ ...
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â”œâ”€â”€ CHATBOT_SETUP.md
â”œâ”€â”€ CHATBOT_INTEGRATION_PLAN.md
â””â”€â”€ BAO_CAO_DE_AN.md       # File nÃ y
```

### C. Screenshots

_(ThÃªm screenshots cá»§a cÃ¡c trang chÃ­nh: Home, Shop, Cart, Admin Dashboard, Chatbot...)_

### D. Demo Video

_(Link YouTube hoáº·c file video demo)_

---

**Háº¾T**

---

**NgÃ y hoÃ n thÃ nh:** [Äiá»n ngÃ y]  
**PhiÃªn báº£n:** 1.0  
**TÃ¡c giáº£:** [TÃªn cá»§a báº¡n]
